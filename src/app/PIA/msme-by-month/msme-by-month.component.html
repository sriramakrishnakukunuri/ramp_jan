<main class="mt-4">
    <section>
      <div class="container-fluid">
        <div class="card mb-3">
          <div class="card-header bg-transparent">
            <div class="row align-items-center">
              <div class="col-12 col-sm-12 col-md-4 col-lg-3">
                <!-- <h6 class="fw-600 mb-2 mb-sm-2 mb-md-0">Quarterly Progress Monitoring</h6> -->
            
              </div>
              <div class="col-12 col-sm-5 col-md-4 col-lg-3">
                
                <mat-form-field appearance="outline" class="w-100">
                            <mat-label>List Of Agencies</mat-label>
                                <mat-select [(ngModel)]="selectedAgencyId" (selectionChange)="GetProgramsByAgency($any($event).value)">
                                <mat-select-filter [array]="agencyList"  (filteredReturn)="agencyListFiltered = $event">
                                </mat-select-filter>
                                <!-- <mat-option value="-1" >All Agencies</mat-option> -->
                                <mat-option *ngFor="let list of agencyListFiltered" [value]="list.agencyId">
                                {{ list.agencyName }}
                                </mat-option>
                            </mat-select>
                            </mat-form-field>
              </div>
           
              <div class="col-12 col-sm-5 col-md-4 col-lg-3">
            
                <mat-form-field appearance="outline" class="w-100">
                            <mat-label>List Of FY</mat-label>
                                <mat-select [(ngModel)]="selectedFinancialYear" (selectionChange)="getBasedOnYearSelection($any($event).value)">
                                <mat-select-filter [array]="financialYears" (filteredReturn)="financialYRFiltered = $event">
                                </mat-select-filter>
                                <!-- <mat-option value="" disabled>Select Program</mat-option> -->
                                <mat-option *ngFor="let list of financialYRFiltered" [value]="list">
                                {{ list }}
                                </mat-option>
                            </mat-select>
                            </mat-form-field>
              </div>
              <div class="col-12 col-sm-12 col-md-4 col-lg-3">
 <div class="month-picker-container">
  <mat-form-field appearance="outline">
    <mat-label>Choose month</mat-label>
    <input
      matInput
      [matDatepicker]="picker"
      [formControl]="month"
      readonly
    />
    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-datepicker
      #picker
      startView="multi-year"
      (monthSelected)="setMonthAndYear($event, picker)"
    
      panelClass="custom-month-picker-panel"
    ></mat-datepicker>
  </mat-form-field>
</div>



                </div>
            </div>
          </div>
          <div class="card-body mb-3">

            <h6 class="fw-bold mb-3 d-flex align-items-center">
                MSME By Month
                <button class="btn btn-default text-lime-green btn-sm " (click)="addRow()" aria-label="Add Row">
                    <i class="bi bi-plus fw-bold"></i>
                </button>
            </h6>
            <!--  id=view-physical-table  -->
            <div class="table-container">
              <table  class="table table-bordered table-striped nowrap w-100 fsize-10">
                <thead class="bg-lime-green text-white">
                  <tr>
                    <th   class="text-center sticky-col-1" rowspan="4">Intervention</th>
                    <th class="text-center sticky-col-1" rowspan="4">Component</th>
                    <th class="text-center sticky-col-1" rowspan="4">Activity</th>

                    
                 
                    <!-- <ng-container *ngFor="let item of this.tableheaderList"> -->
                      <th class="text-center" rowspan="1" colspan="15" >Current Month: {{ month.value | date: 'MMMM yyyy' }} </th>
                      <th class="text-center" rowspan="4" colspan="1" >Actions </th>
                  
                    <!-- </ng-container> -->
                  </tr>
                  <tr>
                    <!-- <ng-container *ngFor="let item of [1,2,3,4,5]"> -->
                      <th class="text-center"  rowspan="1" colspan="4"> Current Quarter
                        Targets v/s Achievements</th>
                      <th class="text-center" rowspan="1" colspan="1" >Data Entry</th>
                      <th class="text-center" rowspan="1" colspan="1" >Data Entry</th>
                      
                      <th class="text-center"  rowspan="1" colspan="5">Current Quarter MSME's Benifitted</th>
                      <th class="text-center" rowspan="1" colspan="4" >Current Month MSME's Benifitted</th>
                    <!-- </ng-container> -->
                  </tr>
                  <tr>
                    <!-- <ng-container *ngFor="let item of [1,2,3,4,5,6,7,8,9,10]"> -->
                      <th class="text-center" >Physical Target</th>
                      <th class="text-center" >Physical Achievements</th>
                        <th class="text-center" >Financial Target</th>
                        <th class="text-center" >Financial Achievements </th>
                      <th class="text-center" >Physical Achievements</th>
                        <th class="text-center" >Financial Achievements </th>

                        <th  class="text-center">Total</th>

                        <th  class="text-center">Women</th>
                        <th  class="text-center">ST</th>
                        <th  class="text-center">SC</th>
                        <th  class="text-center">OBC</th>

                        

                        <th  class="text-center">Women</th>
                        <th  class="text-center">ST</th>
                        <th  class="text-center">SC</th>
                        <th  class="text-center">OBC</th>

                    <!-- </ng-container> -->
                  </tr>
                </thead>
               <tbody>
  <tr *ngIf="isAddingRow">
    <td class="text-center" colspan="1">
      <input class="form-control form-control-sm" [(ngModel)]="newRow.intervention" placeholder="Intervention">
    </td>
    <td class="text-center" colspan="1">
      <input class="form-control form-control-sm" [(ngModel)]="newRow.component" placeholder="Component">
    </td>
    <td class="text-center" colspan="1">
      <input class="form-control form-control-sm" [(ngModel)]="newRow.activity" placeholder="Activity">
    </td>
    <td class="text-center"><input class="form-control form-control-sm" [(ngModel)]="newRow.physicalTarget"></td>
    <td class="text-center"><input class="form-control form-control-sm" [(ngModel)]="newRow.physicalAchievements"></td>
    <td class="text-center"><input class="form-control form-control-sm" [(ngModel)]="newRow.financialTarget"></td>
    <td class="text-center"><input class="form-control form-control-sm" [(ngModel)]="newRow.financialAchievements"></td>
    <td class="text-center"><input class="form-control form-control-sm" [(ngModel)]="newRow.physicalAchievements2"></td>
    <td class="text-center"><input class="form-control form-control-sm" [(ngModel)]="newRow.financialAchievements2"></td>
    <td class="text-center"><input class="form-control form-control-sm" [(ngModel)]="newRow.total"></td>
    <td class="text-center"><input class="form-control form-control-sm" [(ngModel)]="newRow.women"></td>
    <td class="text-center"><input class="form-control form-control-sm" [(ngModel)]="newRow.st"></td>
    <td class="text-center"><input class="form-control form-control-sm" [(ngModel)]="newRow.sc"></td>
    <td class="text-center"><input class="form-control form-control-sm" [(ngModel)]="newRow.obc"></td>

        <td class="text-center"><input class="form-control form-control-sm" [(ngModel)]="newRow.women"></td>
    <td class="text-center"><input class="form-control form-control-sm" [(ngModel)]="newRow.st"></td>
    <td class="text-center"><input class="form-control form-control-sm" [(ngModel)]="newRow.sc"></td>
    <td class="text-center"><input class="form-control form-control-sm" [(ngModel)]="newRow.obc"></td>
    <!-- Add more inputs as needed for all columns -->
    <td class="text-center">
    <button class="btn btn-default text-lime-green btn-sm" (click)="saveRow()" title="Save">
        <i class="bi bi-check-lg"></i>
    </button>
    <button class="btn btn-default text-lime-green btn-sm" (click)="cancelRow()" title="Cancel">
        <i class="bi bi-x-lg"></i>
    </button>
    </td>
  </tr>
  <tr *ngFor="let row of tableData">
    <!-- ...existing data cells... -->
    <td class="text-center">
<button class="btn btn-outline-secondary btn-sm"
        (click)="viewRow(row)"
        data-bs-toggle="modal"
        data-bs-target="#viewRowModal"
        title="View">
  <i class="bi bi-eye"></i>
</button>
    </td>
  </tr>
  <tr *ngIf="!tableData.length && !isAddingRow">
    <td class="text-center" colspan="21">Data Not Available</td>
  </tr>
</tbody>
                </table>
            </div>
          
            
        
          </div>
       
        </div>
      </div>
    </section>
  </main>

  <!-- View Row Modal -->
<!-- View Row Modal -->
<div class="modal fade" id="viewRowModal" tabindex="-1" aria-labelledby="viewRowModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header py-2">
        <h6 class="modal-title" id="viewRowModalLabel">Row Details</h6>
        <button type="button" class="btn-close me-1" data-bs-dismiss="modal" (click)="closeViewModal()" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th colspan="4">Targets v/s Achievements</th>
                    <th colspan="5">MSME's Benifitted</th>
                </tr>
                <tr>
                    <th>Physical Target</th>
                    <th>Physical Achievements</th>
                    <th>Financial Target</th>
                    <th>Financial Achievements</th>
                    <th>Total</th>
                    <th>Women</th>
                    <th>SC</th>
                    <th>ST</th>
                    <th>OBC</th>
                    <!-- Add more headers as needed -->
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>{{viewRowData?.physicalTarget}}</td>
                    <td>{{viewRowData?.physicalAchievements}}</td>
                    <td>{{viewRowData?.financialTarget}}</td>
                    <td>{{viewRowData?.financialAchievements}}</td>
                    <!-- Add more values as needed -->
                </tr>
            </tbody>
        </table>
      </div>
    </div>
  </div>
</div>