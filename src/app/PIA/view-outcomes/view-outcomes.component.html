<main class="mt-4">
    <section>
        <div class="card mb-3">
            <div class="card-header bg-transparent">
                <div class="row align-items-center mb-3">
                    <div class="col-12 col-sm-6 col-md-6 col-lg-6">
                        <h6 class="fw-600 mb-2 mb-sm-0">View Outcomes</h6>
                    </div>
                    <ng-container *ngIf="loginsessionDetails?.userRole == 'ADMIN'">
                        <div class="col-12 col-sm-3 col-md-3 col-lg-3">
                            <mat-form-field appearance="outline" class="w-100">
                                <mat-label>List Of Agencies</mat-label>
                                <mat-select [(ngModel)]="selectedAgencyId" (selectionChange)="getOutcomesList()">
                                    <mat-select-filter [array]="agencyList" [displayMember]="'agencyName'" (filteredReturn)="agencyListFiltered = $event">
                                    </mat-select-filter>
                                    <mat-option value="" disabled>Select Agency</mat-option>
                                    <mat-option *ngFor="let list of agencyListFiltered" [value]="list.agencyId">
                                        {{ list.agencyName }}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </ng-container>   
                    <ng-container>
                        <div class="col-lg-3 col-sm-6 col-md-6">
                            <mat-form-field appearance="outline" class="w-100">
                                <mat-label>List Of Outcomes</mat-label>
                                <mat-select [(ngModel)]="outcomeName" (selectionChange)="dropdownOutcomesList($event,'table')">
                                    <mat-select-filter [array]="outcomesList" [displayMember]="'outcomeTableDisplayName'" (filteredReturn)="outcomesListFiltered = $event">
                                    </mat-select-filter>
                                    <mat-option value="" disabled>Select Outcome</mat-option>
                                    <mat-option *ngFor="let list of outcomesListFiltered" [value]="list.outcomeTableName">
                                        {{ list.outcomeTableDisplayName }}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </ng-container>
                </div>
            </div>
            <div class="card-body">
                <!-- <div class="row mb-3">
                    <div class="col-12 text-end">
                        <div class="btn-group">
                            <button [ngClass]="{'disabled': !outcomeName}" type="button" class="btn btn-secondary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                Download Outcomes
                            </button>
                            <ul class="dropdown-menu">
                                <li>
                                    <a class="dropdown-item" (click)="downloadOutcome('excel')" href="javascript:void(0)">
                                        Excel
                                    </a>
                                </li>
                                <li>
                                    <a class="dropdown-item" (click)="downloadOutcome('pdf')" href="javascript:void(0)">
                                        PDF
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div> -->
                
                <!-- DataTables will handle all rendering -->
                <table id="view-table-outcomes" class="table table-borderless table-striped nowrap">
                    <!-- DataTables will populate headers and data automatically -->
                </table>
                
                <div *ngIf="(!outcomeData || outcomeData.length === 0) && !outcomeName" class="text-center py-4">
                    <p class="text-muted">Please select an outcome to view data</p>
                </div>
            </div>
        </div>
    </section>
</main>